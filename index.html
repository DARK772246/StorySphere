<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF--8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StorySphere - 3D Novel Reader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        html { scroll-behavior: smooth; }
        body { overflow-x: hidden; }
        #canvas-container, #splash-canvas { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; }
        #splash-screen { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #111827; display: flex; justify-content: center; align-items: center; z-index: 100; color: #fff; flex-direction: column; opacity: 1; transition: opacity 1s ease-out; }
        #splash-screen.hidden { opacity: 0; pointer-events: none; }
        .glassmorphism { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); }
        .hover-scale { transition: transform 0.3s ease; }
        .hover-scale:hover { transform: scale(1.05); }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 20; overflow-y: auto; }
        .modal-content { max-width: 800px; margin: 2rem auto; }
        .social-icon { transition: transform 0.3s ease; }
        .social-icon:hover { transform: scale(1.2); }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white">
    <!-- Splash Screen -->
    <div id="splash-screen">
        <h1 class="text-5xl font-bold text-center bg-clip-text text-transparent bg-gradient-to-r from-pink-500 to-yellow-500">Welcome to StorySphere</h1>
        <p class="text-xl mt-4">Dive into a World of Stories...</p>
    </div>

    <div id="canvas-container"></div>
    <div class="relative z-10 min-h-screen flex flex-col">
        <header class="glassmorphism p-4 flex justify-between items-center">
            <h1 class="text-3xl font-bold tracking-tight">StorySphere</h1>
            <nav class="space-x-6">
                <a href="#" class="text-lg hover:text-pink-300 transition-colors">Home</a>
                <a href="#browse" class="text-lg hover:text-pink-300 transition-colors">Browse</a>
                <a href="#about" class="text-lg hover:text-pink-300 transition-colors">About</a>
            </nav>
        </header>

        <main class="flex-grow flex flex-col items-center justify-center py-12 px-4">
            <div class="text-center max-w-2xl">
                <h2 class="text-4xl md:text-5xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-pink-500 to-yellow-500">Dive into Stories with 3D Magic</h2>
                <p class="text-lg md:text-xl text-gray-200 mb-8">Experience novels and stories like never before with our immersive 3D interface.</p>
            </div>
            
            <div id="browse" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl w-full">
                <!-- Book cards will be inserted here by JavaScript -->
            </div>
        </main>

        <section id="about" class="py-12 px-4">
            <div class="max-w-4xl mx-auto glassmorphism p-8 rounded-xl">
                <h2 class="text-3xl font-bold text-center mb-4">About StorySphere</h2>
                <p class="text-center text-gray-200 mb-4">StorySphere is a magical place where stories come to life. We believe in the power of imagination and offer an immersive reading experience that blends technology with the timeless art of storytelling. Dive in and explore new worlds!</p>
                <p class="text-center text-gray-400 text-sm">This website is developed by Salman Khan Orakzai.</p>
            </div>
        </section>

        <div id="book-modal" class="modal glassmorphism">
            <div class="modal-content p-6 rounded-xl">
                <div class="flex flex-col md:flex-row gap-6">
                    <img id="book-image" class="w-full md:w-1/3 rounded-lg" src="" alt="Book Cover">
                    <div class="flex-1">
                        <h2 id="book-title" class="text-3xl font-bold mb-4"></h2>
                        <p id="book-genre" class="text-gray-300 mb-2"></p>
                        <p id="book-pages" class="text-gray-300 mb-4"></p>
                        <p id="book-description" class="text-gray-200 mb-6"></p>
                        <div class="flex gap-4 mb-6">
                            <a id="read-btn" href="#" target="_blank" class="bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition-colors">Read Now</a>
                            <a id="download-btn" href="#" download class="bg-yellow-500 text-black px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors">Download</a>
                            <button id="close-modal" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">Close</button>
                        </div>
                         <div class="flex justify-center space-x-6 mt-4">
                            <a href="https://www.tiktok.com/@hba013?_t=ZS-8yy2XEeMu7l&_r=1" target="_blank" class="social-icon text-2xl hover:text-pink-300"><i class="fab fa-tiktok"></i></a>
                            <a href="https://www.instagram.com/salman_orakxi?igsh=dWlxc2oxZnlyd3Bo" target="_blank" class="social-icon text-2xl hover:text-pink-300"><i class="fab fa-instagram"></i></a>
                            <a href="https://wa.me/03275176283" target="_blank" class="social-icon text-2xl hover:text-pink-300"><i class="fab fa-whatsapp"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="glassmorphism p-6 text-center text-gray-300">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="https://www.tiktok.com/@hba013?_t=ZS-8yy2XEeMu7l&_r=1" target="_blank" class="social-icon text-2xl hover:text-pink-300"><i class="fab fa-tiktok"></i></a>
                <a href="https://www.instagram.com/salman_orakxi?igsh=dWlxc2oxZnlyd3Bo" target="_blank" class="social-icon text-2xl hover:text-pink-300"><i class="fab fa-instagram"></i></a>
                <a href="https://wa.me/03275176283" target="_blank" class="social-icon text-2xl hover:text-pink-300"><i class="fab fa-whatsapp"></i></a>
            </div>
            <p>&copy; 2025 StorySphere. All rights reserved.</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="data.js"></script>
    <script>
        // Splash Screen Logic
        const splashScreen = document.getElementById('splash-screen');
        setTimeout(() => {
            splashScreen.classList.add('hidden');
        }, 3000);

        // Three.js setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);
        const bookGeometry = new THREE.BoxGeometry(2, 3, 0.3);
        const bookTexture = new THREE.TextureLoader().load('https://images.unsplash.com/photo-1544716278-ca5e3f4ebf0c?auto=format&fit=crop&w=200');
        const bookMaterial = new THREE.MeshStandardMaterial({ map: bookTexture, roughness: 0.4, metalness: 0.2 });
        const book = new THREE.Mesh(bookGeometry, bookMaterial);
        scene.add(book);
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 5, 5);
        scene.add(directionalLight);
        camera.position.z = 5;
        function animate() { requestAnimationFrame(animate); book.rotation.y += 0.005; book.position.y = Math.sin(Date.now() * 0.001) * 0.2; renderer.render(scene, camera); }
        animate();
        window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
        
        // DYNAMIC BOOK LOADING
        const bookListContainer = document.getElementById('browse');
        function renderBookCards() {
            bookListContainer.innerHTML = '';
            books.forEach(bookData => {
                const card = document.createElement('div');
                card.className = 'glassmorphism p-6 rounded-xl hover-scale book-card';
                card.setAttribute('data-book-id', bookData.id);
                card.innerHTML = `<h3 class="text-xl font-semibold mb-2">${bookData.title}</h3><p class="text-gray-300 mb-4">${bookData.genre} | ${bookData.pages}</p><button class="bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition-colors w-full">View Details</button>`;
                bookListContainer.appendChild(card);
            });
            addCardEventListeners();
        }

        // Modal functionality
        const modal = document.getElementById('book-modal');
        const closeModalBtn = document.getElementById('close-modal');
        function addCardEventListeners() {
            document.querySelectorAll('.book-card').forEach(card => {
                card.querySelector('button').addEventListener('click', () => {
                    const bookId = parseInt(card.getAttribute('data-book-id'));
                    const bookData = books.find(b => b.id === bookId);
                    
                    document.getElementById('book-title').textContent = bookData.title;
                    document.getElementById('book-genre').textContent = `Genre: ${bookData.genre}`;
                    document.getElementById('book-pages').textContent = `Length: ${bookData.pages}`;
                    document.getElementById('book-description').textContent = bookData.description;
                    document.getElementById('book-image').src = bookData.image;
                    const readBtn = document.getElementById('read-btn');
                    const downloadBtn = document.getElementById('download-btn');
                    
                    if (bookData.pdf) {
                        readBtn.href = bookData.pdf;
                        downloadBtn.href = bookData.pdf;
                        readBtn.style.display = 'inline-block';
                        downloadBtn.style.display = 'inline-block';
                    } else {
                        readBtn.style.display = 'none';
                        downloadBtn.style.display = 'none';
                    }
                    modal.style.display = 'block';
                });
            });
        }
        closeModalBtn.addEventListener('click', () => { modal.style.display = 'none'; });
        renderBookCards();
    </script>
</body>
</html>